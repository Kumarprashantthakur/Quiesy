{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>quiesy</title>
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="stylesheet" href="{% static 'css/take_quiz.css' %}">
</head>
<body>

<!-- TIMER -->
<div class="quiz-timer">
    ⏳ Time Left: <span id="timer">--:--</span>
</div>

<div class="quiz-container">
    <div class="quiz-header">
        <span class="quiz-counter">Question {{ q_index|add:1 }} of {{ total }}</span>
    </div>

    <form id="quiz-form" method="POST" class="quiz-form">
        {% csrf_token %}

        <div class="quiz-body">
            <div class="quiz-left">
                <h2 class="quiz-question">{{ question.text }}</h2>
                <p class="quiz-marks">Marks: {{ question.marks }}</p>
            </div>

            <div class="quiz-right">
                <label class="option-card">
                    <input type="radio" name="selected_option" value="1">
                    <span>A. {{ question.option1 }}</span>
                </label>

                <label class="option-card">
                    <input type="radio" name="selected_option" value="2">
                    <span>B. {{ question.option2 }}</span>
                </label>

                <label class="option-card">
                    <input type="radio" name="selected_option" value="3">
                    <span>C. {{ question.option3 }}</span>
                </label>

                <label class="option-card">
                    <input type="radio" name="selected_option" value="4">
                    <span>D. {{ question.option4 }}</span>
                </label>
            </div>
        </div>

        <div class="quiz-footer">
            <button type="submit" class="quiz-btn">
                {% if q_index|add:1 == total %} Submit {% else %} Next {% endif %}
            </button>
        </div>
    </form>
</div>

<!-- TIMER SCRIPT -->
<script>
let timeLeft = {{ remaining_seconds }};
const timer = document.getElementById("timer");
const form = document.getElementById("quiz-form");

const interval = setInterval(() => {
    if (timeLeft <= 0) {
        clearInterval(interval);
        alert("⏳ Time is up! Quiz will be submitted.");
        form.submit();  // ✅ AUTO SUBMIT
        return;
    }

    let m = Math.floor(timeLeft / 60);
    let s = timeLeft % 60;
    timer.innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
    timeLeft--;
}, 1000);
</script>



</body>
</html>
